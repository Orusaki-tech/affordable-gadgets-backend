erDiagram
    User ||--o{ Admin : "has"
    User ||--o{ Customer : "has"
    Admin }o--o{ Brand : "manages"
    Admin }o--o{ AdminRole : "has"
    
    Brand ||--o{ Product : "belongs_to"
    Brand ||--o{ Promotion : "belongs_to"
    Brand ||--o{ Cart : "belongs_to"
    Brand ||--o{ Order : "belongs_to"
    
    Product ||--o{ ProductImage : "has"
    Product ||--o{ InventoryUnit : "has"
    Product ||--o{ Review : "has"
    Product ||--o{ ProductAccessory : "has_accessories"
    
    InventoryUnit ||--o{ InventoryUnitImage : "has"
    InventoryUnit ||--o{ CartItem : "in_cart"
    InventoryUnit ||--o{ OrderItem : "ordered"
    
    Cart ||--o{ CartItem : "contains"
    Cart }o--|| Customer : "belongs_to"
    
    Order ||--o{ OrderItem : "contains"
    Order }o--|| Customer : "placed_by"
    Order ||--o| PesapalPayment : "has_payment"
    Order ||--o| Lead : "converted_from"
    
    PesapalPayment ||--o{ PaymentNotification : "has_notifications"
    
    Customer ||--o{ Review : "writes"
    Customer ||--o{ Interest : "shows"
    
    Promotion ||--o{ PromotionImage : "has"
    
    User {
        int id PK
        string username
        string email
        string password
    }
    
    Brand {
        int id PK
        string code UK
        string name
        string domain
    }
    
    Product {
        int id PK
        int brand_id FK
        string name
        string slug
        text description
    }
    
    InventoryUnit {
        int id PK
        int product_id FK
        string status
        decimal price
        string sale_status
    }
    
    Order {
        uuid order_id PK
        int customer_id FK
        int brand_id FK
        decimal total_amount
        string status
    }
    
    Cart {
        int id PK
        int brand_id FK
        string session_key
        string customer_phone
    }